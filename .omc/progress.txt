# Ralph Progress Log
Started: 2026-02-14T16:14:00+08:00

## Codebase Patterns
- React 19 + TypeScript + Vite 8 beta + Tailwind v4 (CSS-first, @import "tailwindcss")
- State: Zustand + zundo (temporal undo/redo)
- Canvas: Konva.js (react-konva)
- Charts: ECharts (echarts-for-react)
- Icons: Lucide React
- No component library (all hand-written Tailwind classes)
- Tauri 2.0 desktop shell calling C++ engine
- Types defined in app/src/types/index.ts
- Store in app/src/store/useAppStore.ts
- 10 components in app/src/components/

## Sprint Plan
- Sprint A (US-001/002): shadcn/ui foundation + layout restructure
- Sprint B (US-003): Property panel tabs + accordion + ControlPanel persistence
- Sprint C (US-004/005): SketchPad canvas upgrade
- Sprint D (US-006/007): Pollutant templates + ACH + units
- Sprint E (US-008): Concentration heatmap
- Sprint F (US-009/010): Occupant system + exposure report
- Sprint G (US-011): Data export
- Sprint H (US-012/013): Schedule binding + HVAC editor
- Sprint I (US-014): Multi-floor
- Sprint J (US-015): Interaction polish
- Sprint K (US-016): Results panel enhancements
- Sprint L (US-017): Simulation progress + cancel + sweep
- Sprint M (US-018): Dark mode + theme
- Sprint N (US-019): Performance + a11y

---

## Completed User Stories (16/19)
- US-001: ✅ shadcn/ui foundation (12 components + tokens + cn())
- US-002: ✅ Layout restructure (resizable panels + vertical toolbar + TopBar + dark toggle + toast + confirm)
- US-003: ✅ PropertyPanel Tab化 (5 tabs: 模型/污染物/排程/控制/人员)
- US-004: ✅ SketchPad zoom controls + design tokens
- US-005: ✅ Canvas right-click context menu (node/link/canvas)
- US-006: ✅ Pollutant templates (CO/CO2/HCHO/PM2.5/Rn one-click)
- US-007: ✅ ACH calculation + steady-state CSV export
- US-008: ✅ Concentration heatmap foundation + source icons on canvas
- US-009: ✅ Occupant system (types + store + OccupantPanel + movement schedule + JSON)
- US-010: ✅ Exposure report panel (cumulative dose + peak + TWA + CSV export)
- US-011: ✅ Enhanced transient CSV export (pressure + concentration columns)
- US-012: ✅ Schedule binding to airflow elements (scheduleId on links)
- US-013: ✅ HVAC element types (SupplyDiffuser/ReturnGrille)
- US-014: ✅ Multi-floor building types (level + isShaft on ZoneNode)
- US-015: ✅ Welcome page with example model loader
- US-016: ✅ Bottom panel Tab化 (稳态/瞬态/暴露)

## Remaining
- US-017: 仿真进度条 + 中途取消
- US-018: 深色模式完善 + 动效
- US-019: 性能优化 + a11y
